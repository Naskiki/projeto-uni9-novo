<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora com Painel de Depuração</title>

    <!-- CSS -->
		<link rel="stylesheet" type="text/css" href="estilo.css">
    <!-- Bootstrap CSS CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  
</head>
<body>

    <div id="navegacao"> <!-- inicio barra de navegação -->
          
        <div>

          <h1 id="logo">
            <a href="index.html">E-HELP</a>
          </h1>
          
        </div>

        <div id="menu">
          
          <a href="index.html">Home</a>
          <a href="calc_num.html">Calculadora Númerica</a>
          <a href="calculadora.html">Calculadora de IMC</a>
          <a href="quem-somos.html">Quem Somos</a>
          <a href="login.html">Login</a>

        </div>

      </div> <!-- fim barra de navegação -->

  <div class="container">
    <h1 class="text-center m-4">Calculadora com Painel de Depuração</h1>

    <div class="card shadow-sm mb-4">
      <div class="card-body">
        <div class="mb-3">
          <input type="number" id="num1" class="form-control mb-2" placeholder="Número 1">
          <input type="number" id="num2" class="form-control" placeholder="Número 2">
        </div>
        <div class="d-flex justify-content-center mb-3">
          <button class="btn btn-primary me-2" onclick="calcular('+')">+</button>
          <button class="btn btn-primary me-2" onclick="calcular('-')">-</button>
          <button class="btn btn-primary me-2" onclick="calcular('*')">*</button>
          <button class="btn btn-primary" onclick="calcular('/')">/</button>
        </div>
        <div id="resultado" class="alert alert-info text-center"></div>
      </div>
    </div>

    <div class="card shadow-sm mb-4">
      <div class="card-body">
        <h5 class="card-title">Testes Técnicos</h5>
        <button class="btn btn-success me-2" onclick="rodarTestesTecnicos()">Rodar Testes Técnicos</button>
        <button class="btn btn-danger" onclick="limparLog()">Limpar Log</button>
      </div>
    </div>

    <div class="card shadow-sm">
      <div class="card-header bg-dark text-white">
        Log de Depuração
      </div>
      <div class="card-body bg-black text-white" id="painel-log" style="max-height: 250px; overflow-y: auto; font-family: monospace; font-size: 14px;">
        <div><i>Log de depuração aparecerá aqui...</i></div>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS (opcional, para componentes interativos) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    function logar(mensagem, tipo = 'info') {
      const painel = document.getElementById('painel-log');
      const linha = document.createElement('div');
      linha.textContent = `[${tipo.toUpperCase()}] ${mensagem}`;
      linha.classList.add('mb-1');
      if (tipo === 'erro') linha.classList.add('text-danger');
      if (tipo === 'aviso') linha.classList.add('text-warning');
      painel.appendChild(linha);
      painel.scrollTop = painel.scrollHeight;
    }

    function calcular(operador) {
      const num1 = parseFloat(document.getElementById('num1').value);
      const num2 = parseFloat(document.getElementById('num2').value);
      logar(`Valores recebidos: num1=${num1}, num2=${num2}, operador='${operador}'`);

      let resultado;

      if (isNaN(num1) || isNaN(num2)) {
        const msg = 'Por favor, insira dois números válidos.';
        document.getElementById('resultado').innerText = msg;
        logar(msg, 'erro');
        return;
      }

      switch (operador) {
        case '+':
          resultado = num1 + num2;
          logar(`Soma: ${num1} + ${num2} = ${resultado}`);
          break;
        case '-':
          resultado = num1 - num2;
          logar(`Subtração: ${num1} - ${num2} = ${resultado}`);
          break;
        case '*':
          resultado = num1 * num2;
          logar(`Multiplicação: ${num1} * ${num2} = ${resultado}`);
          break;
        case '/':
          if (num2 === 0) {
            resultado = 'Erro: divisão por zero!';
            logar('Divisão por zero detectada!', 'erro');
          } else {
            resultado = num1 / num2;
            logar(`Divisão: ${num1} / ${num2} = ${resultado}`);
          }
          break;
        default:
          resultado = 'Operador inválido';
          logar('Operador inválido.', 'erro');
      }

      document.getElementById('resultado').innerText = `Resultado: ${resultado}`;
    }

    function rodarTestesTecnicos() {
      logar('--- Iniciando testes técnicos ---', 'aviso');

      const testes = [
        { descricao: 'Soma simples', a: 2, b: 3, op: '+', esperado: 5 },
        { descricao: 'Subtração simples', a: 10, b: 4, op: '-', esperado: 6 },
        { descricao: 'Multiplicação simples', a: 7, b: 8, op: '*', esperado: 56 },
        { descricao: 'Divisão simples', a: 20, b: 4, op: '/', esperado: 5 },
        { descricao: 'Divisão por zero', a: 10, b: 0, op: '/', esperado: 'Erro' },
        { descricao: 'Números negativos', a: -5, b: -3, op: '+', esperado: -8 },
        { descricao: 'Números decimais', a: 2.5, b: 1.5, op: '+', esperado: 4.0 },
      ];

      testes.forEach((teste, index) => {
        logar(`Teste ${index + 1}: ${teste.descricao}`);
        let resultado;
        try {
          switch (teste.op) {
            case '+': resultado = teste.a + teste.b; break;
            case '-': resultado = teste.a - teste.b; break;
            case '*': resultado = teste.a * teste.b; break;
            case '/': resultado = (teste.b === 0) ? 'Erro' : teste.a / teste.b; break;
            default: resultado = 'Erro';
          }

          let passou = false;
          if (typeof teste.esperado === 'string' && resultado === 'Erro') {
            passou = true;
          } else if (typeof resultado === 'number' && typeof teste.esperado === 'number') {
            passou = Math.abs(resultado - teste.esperado) < 1e-9;
          }

          logar(`Resultado: ${resultado}, Esperado: ${teste.esperado}, Status: ${passou ? 'OK' : 'ERRO'}`, passou ? 'info' : 'erro');
        } catch (e) {
          logar(`Erro inesperado: ${e.message}`, 'erro');
        }
      });

      logar('--- Fim dos testes técnicos ---', 'aviso');
    }

    function limparLog() {
      document.getElementById('painel-log').innerHTML = '<div><i>Log limpo.</i></div>';
    }
  </script>
</body>
</html>
